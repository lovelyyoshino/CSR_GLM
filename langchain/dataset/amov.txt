问答资料
一、飞控通过USB不能正常连接到电脑，如何解决？
1.检查飞控通过USB与电脑硬件连接是否正常。
2.飞控是否正常启动或者查看飞控LED灯是否正常（飞控正常启动GPS会有提示音）。
3.可能为飞控带有较大功率设备，单靠数据线供电不足以启动，尝试拔掉飞控上除GPS线以外的线，来排查问题。
4.可能为固件加载失败，导致飞控不能正常启动。
5.以上方法都不行，可能为驱动问题，重新安装地面站，或尝试换台电脑试试。

二、不能解锁问题（注意：调试时需取下螺旋桨，以免发生安全事故）如何解决？
1.查看硬件连接，否有漏接、错接。
2.连接地面站，查看是报错原因。如果没有报错，可能是飞控没有收到正确遥控器解锁指令信号，尝试重新校准遥控器，如果不会校准遥控器，可参考我们出的校准视频：
https://bbs.amovlab.com/plugin.php?id=zhanmishu_video:video&mod=video&cid=25
3.如有报错原因，解决报错问题。（报错原因为英文，如不理解报错是什么意思，请先百度翻译）
点击QGC红色初始界面上感叹号图标，查看报错信息，尝试抓取报错中关键信息，如绿色圈出的地方，Compass；就可以大致推断报错原因大概为罗盘问题，试试校准罗盘解决问题。Accelerometer;则大致可以推断为加速计有关，尝试校准加速度计解决问题。

三、地面站显示已解锁，但电机没有响应（调试时需取下螺旋桨，以免发生安全事故）如何解决？
1、查看飞控和电调是否接在同一个电源上，
2、查看飞控和电调的信号线连接是否有接触不良、漏接、错接。
校准视频可参考：
https://bbs.amovlab.com/plugin.php?id=zhanmishu_video:video&mod=video&cid=253、检查是否再在地面站设置了killswich，但是遥控器通道并未映射对应实体按键或拨杆

四、飞机室内外飞行定位来源和定高来源切换设置(注意根据不同的使用环境更换对应的参数使定位定高效果更佳）
更改EKF2_AID_MASK参数，室外可以选择GPS.或者选择视觉，室内则只能选择视觉。
更改EKF2_HGT_MASK参数,选择气压计或者距离传感器（TFmini）,如使用RTK则选择GPS，如飞行要启动T265 则可选择vision。

五、不能进入定点模式，如何解决？
1. 检查飞机是室内配置还是室外配置，如果飞机是室外配置，只有GPS。则使用场景只能在室外。（注意室内是没有GPS信号的）
2. 2.如果配置有GPS 和室内定位传感器的配置，检查定位来源是否和使用场景匹配。关于室内室外场景的定位来源参数设置可参考P200 Wiki介绍说明https://www.amovlab.com/document
3.室外有GPS的配置无法也不法切定点，看一下搜星数有多少，15颗以上。HDOP(水平定位因子)和VDOP(垂直定位因子) ,理想值应该在1.5一下(水平定位因子)，1以下最好。场地要选在空旷的地方，最好不要有高楼建筑，大树遮挡


六、更换遥控器后，遥控器校准界面不能检测到遥控器，如何解决?
1.查看遥控器对码是否成功。
2.查看遥控输出模式是否为PPM或者SBUS。
3.查看接收机连接飞控位置是否正确。

七、起飞侧翻，如何解决？
1.电调信号线与主控接线是否正确对应。
2.电机转向和桨叶的安装是否正确。


八、PX4固件常用几种飞行模式
Manual
手动模式：飞行员的控制输入直接传输混控器。(不建议新手使用)
Stabilized
自稳模式：飞控会让飞行器只有保持姿态是稳定的。(不建议新手使用)

手动/稳定模式在当遥控杆居中时可稳定多旋翼飞行器。 要手动移动/飞行飞机，您可以移动杆使其偏离居中位置。
在手动控制下，滚转和俯仰杆控制绕各个轴的飞机的角度（姿态），偏航杆控制水平面上方的旋转速度，油门控制高度/速度。
一旦释放操纵杆，它们就会返回中心死区。 一旦滚转和俯仰杆居中，多旋翼飞行器将平稳并停止运动。 然后飞机将悬停在适当的位置/保持高度——前提是它正确地配平，油门处于适当位置（参见下面），并且不施加外力（例如风）。 飞行器将朝着任何风的方向漂移，你必须控制油门以保持高度。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/manual_stabilized_mc.html

Acro
特技模式：该模式是基于速率控制的模式，该模式在遥控器摇杆与飞行器电机之间建立直接控制关系。当飞行员的输出作为滚装、俯仰和偏航的指令传送给飞控，这允许多旋翼可以完全翻转，油门被直接传送到混空器。在特技模式下飞行，就像是不装飞控的遥控直升机一样，需要持续不断的手动摇杆操作。(不建议新手使用)
更多该模式的设置可参考：
https://docs.px4.io/main/zh/flight_modes/acro_mc.html

Altitude
定高模式：高度模式是一个相对容易飞的遥控模式，滚转和俯仰杆控制飞机在左右和前后方向上的运动（相对于飞机的“前部”），偏航杆控制水平面上的旋转速度，油门控制上升 -下降的速度。
当杆被释放/回中时，飞机将恢复水平并保持当前的高度。 如果在水平面上运动，飞机将继持续运动直到任何动量被风阻力消散。 如果刮风，飞机会向风的方向漂移。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/altitude_mc.html



Position
定点模式：位置模式是一种易于驾驶的遥控模式，其中滚动和俯仰操纵杆在左右和前后方向（相对于飞机的“前部”）控制地面速度，并且油门控制上升-下降的速度。 当杆被释放/居中时，飞机将主动制动、改平并锁定到3D空间中的位置——补偿风和其他力。

位置模式是对于新手而言最安全的手动模式。 与高度和手动/稳定模式不同，当摇杆居中时飞机将停止运动，而不是持续运动直至被风阻减慢为止。(新手首选)
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/position_mc.html
Mission
任务模式：任务模式使车辆执行已上载到飞行控制器的预定义的自主任务（飞行计划）。该任务通常是通过地面控制站（GCS）应用程序（例如QGroundControl（QGC））创建和上传的。

此模式需要3d位置信息（例如GPS）。
在启用该模式之前，必须对车辆进行布防。
此模式是自动的-没有用户干预 需要 来控制车辆。
RC控制开关可用于更改任何车辆上的飞行模式。 默认情况下， RC摇杆运动将以 多旋翼飞行时 将车辆更改为“ 位置”模式 ，除非处理关键的电池故障保护（固定翼飞行会忽略摇杆运动）。
描述
任务通常在地面控制站（例如QGroundControl）中创建，并在发射前上载。它们也可以由开发人员API创建和/或在飞行中上传。

个别任务的命令在一个方式，是适合于每个车辆的飞行特性（例如蹭被实现为处理悬停用于直升机和圆固定翼）。VTOL车辆在FW模式下遵循固定翼的行为和参数，在MC模式下遵循直升机的行为和参数。

任务已上载到需要启动自动驾驶仪之前插入的SD卡。

在高级别上，使用MISSION模式时，所有车辆类型的行为都相同：

如果已存储任务并且PX4正在飞行，它将 从当前步骤开始 执行 任务/飞行计划 。
如果已存储任务且PX4已着陆：
在直升机上，PX4将执行 任务/飞行计划 。 如果任务没有 TAKEOFF 命令，则PX4将在执行当前步骤的其余飞行计划之前，将车辆飞行到最低高度。
在固定翼车辆上，PX4不会自动起飞（自动驾驶仪会检测到不运动，并将油门设为零）。 如果在任务模式下用手或弹射器发射，车辆可能会开始执行任务。
如果未存储任何任务，或者PX4已完成执行所有任务命令：
如果飞行，车辆会游荡。
如果着陆，车辆将“等待”。
您可以通过在 QGroundControl中 选择当前任务命令来手动更改它 。
如果任务中有“跳转到项目”命令，则移动到另一个项目不会重置循环计数器。一种暗示是，如果将当前任务命令更改为1，则不会“完全重新启动”任务。

仅当车辆解除武装或上载新任务时，任务才会重置。
要在车辆着陆后自动撤防，请在QGroundControl中进入“车辆设置”>“安全”，导航至“着陆模式设置”，然后选中标有“在撤防后撤防”的框。输入降落后等待的时间，然后才能解除车辆的装甲。
可以通过激活保持模式来暂停任务。当您重新激活MISSION飞行模式时，任务将从当前任务命令继续执行。在任务模式下飞行时，如果您决定中止任务并切换到任何其他模式（例如，位置模式），使用RC将车辆飞行到其他地方，然后再切换回任务模式，则车辆将从当前位置继续执行任务，并且飞往尚未访问的下一个任务航路点。
在切换到任何RC模式之前，请确保油门杆不为零（否则车辆将坠毁）。建议您在切换到任何其他模式之前将控制杆居中。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/mission.html

Hold
定点模式：在保持飞行模式（又名“游荡”）使车辆停止，并保持其当前GPS位置和高度（MC车辆将在GPS位置徘徊，而FW车将周围一圈）。

保持模式可用于暂停任务或在紧急情况下帮助您重新控制车辆。通常使用预编程的开关激活它。

此模式需要GPS。
此模式是自动的-没有用户干预 需要 来控制车辆。
RC控制开关可用于更改任何车辆上的飞行模式。 RC摇杆运动的效果取决于车辆类型。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/hold.html

Return
返航模式：在返回飞行模式用于车辆飞到安全的通畅道路上一个安全的目的地，在那里既可以等待（悬停或圆形）或土地。

PX4提供了几种用于选择安全返回路径，目的地和着陆的机制，包括使用归属位置，集会（“安全”）点，任务路径和任务着陆顺序。

以下各节说明如何配置回程类型，回程高度和着陆/到达行为。最后，有几节说明每种车辆类型的默认（预配置）行为。

此模式需要GPS。
此模式是自动的-没有用户干预 需要 来控制车辆。
RC控制开关可用于更改任何车辆上的飞行模式。 RC摇杆运动的效果取决于车辆类型。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/return.html

Land        
降落模式：降落飞行模式使无人机降落在该模式被使用的位置。降落后，无人机将会在一小段时间后上锁（默认情况下）。
注解
该模式需要有效的位置估计，除非由于失效保护进入该模式，这种情况下仅需要高度估计（通常飞控内置一个气压计）。
这种模式是自动的，不需要用户干预来控制无人机。
遥控器开关可以用于更改任何无人机的飞行模式。
在多旋翼中移动遥控器摇杆（或 VTOL 在多旋翼模式下）默认情况下会将无人机切换到位置模式，除非是处理电池失效保护。
该模式可以通过MAV_CMD_DO_LAND_START MAVLink命令触发，或者通过显式切换到陆地模式。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/land.html

跟随模式：操作者手中的笔记本电脑带有GPS，此GPS会将位置信息通过地面站和数传电台随时发给飞行器，飞行器实际执行的是飞到这里”的指令。其结果就是飞行器跟随操作者移动。
Take off
起飞模式：飞行器自主起飞，起飞到一定高度悬停。
注解:
该模式需要一个良好的位置估计（如，从 GPS 中获取）。
使用此模式前必须先解锁。
此模式为自动模式，无需用户干预即可控制无人机。遥控开关可以在任何无人机上更改飞行模式。
在多旋翼中移动遥控器摇杆（或 VTOL 在多旋翼模式下）默认情况下会将无人机切换到位置模式，除非是处理电池失效保护。
如果起飞时出现问题，故障检测器 将自动停止引擎。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/takeoff.html

Offboarrd
外部模式
飞行器根据飞行控制栈外部（如机载计算机）提供的设定值控制位置、速度、加速度、姿态以及推力/力矩。 设置值可以经由 MAVLink 提供(也可以是一个类似 MAVSDK (opens new window)的MAVLink API)或者经由 ROS 2 提供。

PX4要求外部控制器提供2Hz连续的“有效存在”信号，该信号可由任意支持的 MAVLink 设置点消息或ROS 2 OffboardControlMode 消息提供。 PX4只有在收到该种信号超过1秒后才有效，如果该种信号停止飞行控制栈将重新获得控制权（脱离Offboard模式）。

注解

此模式需要位置或位/姿信息 - 例如 GPS、光流、视觉惯性里程计、mocap 等。
除了更改模式外， 禁止遥控器控制。
飞行器必须已经收到一条 MAVLink 设置点消息或 ROS 2 OffboardControlMode 消息，才允许在Offboard模式下解锁或者在飞行中切换至Offboard模式。
如果没有以 > 2Hz 的速度收到MAVLink 设置点消息或 OffboardControlMode ，飞行器将退出Offboard模式。
并非所有 MAVLink 支持的坐标系和字段值都被设定值消息和飞行器支持。 请仔细阅读以下章节，确保仅使用支持的值。 
#描述
Offboard模式通过设置位置、速度、加速、姿态、姿态角速率或力/扭矩设置点来控制飞行器的移动和姿态。

PX4 必须能够以2Hz的速率连续收到 MAVLink 设置点消息或 ROS 2 OffboardControlMode 消息以确保外部控制器是正常运行的。 该消息必须已经持续发送1秒钟以上PX4才能在Offboard模式下解锁或在飞行中切换至Offboard模式。 如果在外部控制器给出的指令速率低于2Hz，PX4将在超时(COM_OF_LOSS_T)后退出Offboard模式，并尝试降落或执行其他一些失败保护行为。 失效保护行为取决于RC遥控器是否可用，依据参数 COM_OBL_RC_ACT 的设定。

当使用 MAVLink 时，设定值消息既传达了指示外部控制器"正常运行"的信号也传达了设定值本身。 Offboard模式下要保持位置，飞行器必须接收到一个包含当前位置设定值的消息指令。

当使用 ROS 2 时，外部控制器运行正常通过监测 OffboardControlMode 消息流确保，真实设定点由发布任一包含设定值的uORB消息提供，例如 TrajectorySetpoint。 在这种情况下保持当前位置，飞行器必须收到连续的 OffboardControlMode 消息，但只需要收到 TrajectorySetpoint 消息一次。

请注意，Offboard模式只支持非常有限的 MAVLink 命令和消息。 其他操作如起飞、降落、返航，最好使用适当的模式来处理。 像上传、下载任务这样的操作可以在任何模式下执行。
更多该模式的设置可参考：https://docs.px4.io/main/zh/flight_modes/offboard.html


九、电池满电，但是飞控报电量过低，如何解决？
在QGC中的电源选项——电压分压器点击计算，填写测到的电池电压，点击Calculate开始计算，待飞机电压与测量电压大致相同是点击关闭，重启即可。

十、电调校准失败，如何解决？（PX4固件）
1、电调校准失败可能是飞控是带有较大功率的设备，需要将除了飞控供电线、电调信号线，其余所有线都拔掉，在进行校准，校准完成再将线插回原来位置即可。
2、电调信号和飞控接触问题，也可能是飞控和分电板的连接问题，更换其他设备用排除法找出问题。

十一、飞控指示灯说明
1.[蓝色常亮解锁，无GPS锁定/Armed, No GPS Lock：表示车辆已装备并且没有GPS装置的位置锁定。 当车辆解锁时，PX4将解锁对电机的控制，允许您驾驶无人机。 解锁时要小心，因为大型螺旋桨在高转速时会很危险。 在此模式下，车辆无法执行引导任务。
2.[蓝色闪亮锁定，无GPS锁/Disarmed, No GPS Lock：与上述类似，但您的车辆已解除武装。 这意味着您将无法控制电机，但所有其他子系统都在工作。
3.[绿色常亮解锁，GPS锁定/Armed, GPS Lock：表示车辆已装备并且具有GPS装置的有效位置锁定功能。 当车辆布防时，PX4将解锁对电机的控制，允许您驾驶无人机。 解锁时要小心，因为大型螺旋桨在高转速时会很危险。 在这种模式下，车辆可以执行引导任务。
4.[绿色闪亮锁定，GPS锁定/Disarmed, GPS Lock：与上述类似，但您的车辆已撤防。 这意味着您将无法控制电机，但所有其他子系统（包括GPS位置锁定）都在工作。
5.[紫色常亮故障安全模式/Failsafe Mode：当车辆在飞行过程中遇到问题时，此模式将激活，例如失去手动控制，电池严重不足或内部错误。 在故障保护模式期间，车辆将尝试返回其起飞位置，或者可以简单地下降到当前的位置。
6.[橙色常亮低电量警告/Low Battery Warning：表示您的车辆电池运行危险性低。 在某一点之后，车辆将进入故障安全模式。 但是，这种模式应该警告说是时候结束这次飞行了。
7.[红色闪亮错误/设置要求/Error/Setup Required：表示您的自动驾驶仪需要在飞行前进行配置或校准。 将自动驾驶仪连接到地面控制站以验证问题所在。 如果您已完成设置过程并且自动驾驶仪仍显示为红色并闪烁，则可能存在其他错误。
如果出现错误（红色闪烁），或者车辆无法实现GPS锁定（从蓝色变为绿色）请检查QGroundControl中的更详细状态信息，包括校准状态和预检检查报告的错误消息（ 内部）。还要检查GPS模块是否正确连接，Pixhawk正在正确读取GPS，并且GPS正在发送正确的GPS位置。

十二、电机不能正常工作、正反来回抖动，如何解决？
此现象绝大可能为电机缺相，检测电调到电机之间三根线，是否有接触不良。

十三、电量显示器（BB响）如何使用?
如题所示将电量显示器连接在电池平衡头端，黑色负极靠最左边，按电量显示器顶部按钮来设置报警电压，通常设置为3.6V。当电池单片电芯低于3.6V时电量显示器会发出警报。
 

十四、遥控器如何对码（这里以富斯I6s为例）
接收机短接（连接VCC口的S和负极）后上电，接收机会进入对码模式，然后遥控器进入设置→系统设置→对码，遥控器搜索到处于对码模式的接收机就会进行对码，成功后提示对码成功，对码成功后拔掉短接线。用金属连接两针即为短接
 

十五、使用数传连不上无人机，如何排查问题？
1、 WiFi数传：是否能连上WiFi？检查WiFi数传供电是否正常？是否能平通飞控IP？数传连接线与飞控是否正常连？（确认数传连接线是否插在飞控TELEM1口）飞控是否正常启动？数传线连接飞控串口是否为WiFi数传波特率相同（57600）？连接设置是否正常(端口号6000）？
2、 HOMER图数传：使用的电脑是否已连接图数传局域网？电脑的IP是否和图传在同一个网段内并不与其他IP冲突？是否能ping通飞控IP？图数传连接线与飞控是否正常连？飞控是否正常启动？数传线连接飞控串口是否为WiFi数传波特率相同（57600）？连接设置是否正常？(注意图数传端口号为8080）
3 、基础款（点对点数传）：检查电脑设备管理器——端口是否存在飞控对应的COM口？如没有尝试重新安装地面站并允许安装所有驱动或安装驱动精灵。飞控是否正常启动？数传线连接飞控串口是否为数传波特率相同？飞控串口是否能正常工作？
4、雷迅WiFi数传连接飞控：检测笔记本电脑是否连上无人机WiFi，WiFi密码为cuavwlink  确定无人机飞控正常启动，检查通讯连接是否为UDP模式，地址是否为14550，如以上都正常还是连接不尝试更换电脑或者手机，手机需要下载对应的地面站软件。

十六、遥控器是如何控制无人机运动的？（以我们发货默认的左手油门遥控器）
1、上下运动：遥控器左摇杆拉到右下角解锁后，缓慢往上推动油门，（注意新手需要确定无人机已经进入定点模式）发出信号通过接收机传到飞控，飞控做出反馈，出信号传给电调控制电机带动螺旋桨加速使无人机升力增加，当升力大于重力使，无人机离地起飞。反之则下降。
2、左右运动：遥控器右摇杆缓慢向右拨动，左侧两个电机加速升力增加，使无人机向右倾斜，无人机升力产生一个向右的水平分量，是无人机向右运动。
遥控器右摇杆缓慢向左拨动，右侧两个电机加速升力增加，使无人机向左倾斜，无人机升力产生一个向左的水平分量，是无人机向左运动。
3、前后运动：遥控器右摇杆缓慢向前拨动，后面两个电机加速升力增加，使无人机向前倾斜，无人机升力产生一个向前的水平分量，是无人机向前运动。
遥控器右摇杆缓慢向后拨动，前方两个电机加速升力增加，使无人机向后倾斜，无人机升力产生一个向后的水平分量，是无人机向后运动。
4、偏航运动：左摇杆向左缓慢拨动，顺时针桨叶加速旋转，逆时针桨叶减速旋转，由于电机旋转产生的反扭力不能平衡，使无人机逆时针旋转。向右缓慢拨动
逆时针桨叶加速旋转，顺时针桨叶减速旋转，由于电机旋转产生的反扭力不能平衡，使无人机顺时针旋转。

十七、遥控器拨杆的作用是什么？如何设置？
拨杆通过绑定一个空闲的通道发送不同的PWM信号，来实现一些飞行模式的切换，例如一键返航。
如何设置？（这里以FSi6S为例）
遥控器出厂我们已经设置好了如误操作导致恢复出厂设置请按照下列步骤设置遥控器
设置——系统——输出模式 将PWM改为PPM输出，然后与接收机对码，按照上文 
十四、富斯I6S遥控器如何对码?
在遥控器界面设置——功能——辅助通道 内先选择要用的通道，然后选择要用的拨杆开关名，例如SWC。然后地面站校准遥控器，波动SWC拨杆查看是否有反馈，
设置完成则可以在地面站选择对应通道要控制的模式或者开关。注意设置完成需要重新再地面站校准遥控器

我们通常将三段开关SWC设置为飞行模式开关，在地面站飞行模式位置波动SWC，查看光标能到达的位置，在对应位置右侧设置需要的飞行模式。
 
十八、无人机无法定点悬停排查方法？
1、首先查看无人机当前处于的飞行模式，在地面站上查看。Position模式下才能进行定点悬停。 Stabilized或者Altitude模式因为没有位置信息介入，所以飘动是正常现象。如无法切入定点模式，请参考上文，五、不能进入定点模式，如何解决？

2、进入Position模式，但是还是不能定点悬停，请参考上文，五、不能进入定点模式，如何解决？
十九、如何设置失控返航？
点击设置界面，选择安全，找到遥控器信号丢失保护触发器，设置为Return mode，并设置丢失超时时间。（注意这里更改失控返航后，可能会导致室内没有返航位置而不能解锁，建议在开始室外飞行时开启此功能）
二十、PX4传感器校准
1、磁力计校准
按照地面站界面所显示的相应摆放飞机的姿态，然后在水平面内朝一个方向旋转，直至下一个方向。
2、陀螺仪校准
陀螺仪校准只需要把飞机平放即可，校准完成后会边框会显示为绿色。
3、加速度计校准
加速度计校准为6面校准，只需要将飞机按照6个面分别摆放即可，没校准的边框为红色，正在校准中边框为黄色，校准完成边框为绿色。
4、水平面校准
水平面校准只需要将飞机放平即可，校准完成后会有“calibration done”的字样，意为校准完成。
二十一、遥控器校准
请按照以下步骤操作

点击校准，然后将油门拨到最低，如下图所示
然后按照界面右方的操作指示拨动摇杆


当全部操作校准完成后，会显示如下界面，此时将油门拨到最低，然后点击下一步。


当连续点击两次下一步后，会有如下界面，就表示此时校准已经完成。

二十二、飞行模式设置
可以在遥控器上设置通道，一般三挡开关对应飞行模式1、飞行模式4、飞行模式6。如图所示，此时通道5设置的三个模式分别为自稳模式、定点模式、降落模式。


如有需要板载计算机模式和返航模式，也可在开关设置下自行设置。如图所示，设置通道6为offboard模式，通道7为返航模式。

二十三、遥控器紧急开关设置
遥控器设置（以富斯i6s为例）
打开FS-I6S遥控器，进入功能设置页面。

点击进入辅助通道设置。

将7通道开启，并设置为开关SWA，SWA对应的是左上角的两段开关。



QGC地面站软件映射
连接上QGC，进入设置界面的飞行模式设置将Emergency Kill switch channel映射为7通道。


拨动遥控器的SWA开关，会有7通道的响应。

急停操作演示及注意事项
急停开关是在飞机飞行过程中，进行紧急使用的，在急停开关启用的5s时间内，如果复位急停开关，那么电机又重新恢复旋转，所以在使用急停开关过程中建议至少超过5s时间再去复位急停开关。


急停开关启用之后，会qgc提示急停开关已启用，在5s以内，飞机目前仍处于解锁状态，只不过急停开关让电机停止旋转，等待五秒之后，飞机进入未解锁状态。

二十四、电池校准
1、用BB响（低压报警器）测出飞机实际电压
2、在电源界面下，选择“电压分压器”，点击计算
3、在测量电压下输入已经测得的实际电压，然后点击“Calculate”。
4、等到“测量电压”与“飞机电压”数字接近时，表面电压校准已经完成，此时点击关闭即可。
二十五、电调校准
注意！校准前不允许给飞机上电，把桨叶拆卸下来。
1、在QGC电源设置界面下，点击电调PWM最大最小值下的“校准”按钮。
2、给飞机上电，飞机会自动进行电调校准，几秒钟后就会校准完成了。
二十六、PX4常用参数设置
1、EKF2_AID_MASK 位置估计来源选择
整数位掩码控制数据融合和辅助方法
注释:设置位在以下位置使能:
0:设置为true使用GPS数据(如果有)
1:设置为true使用光流数据(如果有)
2:设置为true以抑制IMU delta速度偏差估计
3:设置为true以启用视觉位置融合
4:设置为true以启用视觉偏航融合。如果位7为真，则不能使用。
5:设置为true，启用多旋翼阻力比力融合
6:如果EV观测值在非NED参考系中并且在使用前需要旋转，则设置为true
7:设置为true，启用GPS偏航融合。如果位4为真，则不能使用。
Bitmask：
0:使用GPS
1:采用光流
2:抑制IMU偏置估计
3:视觉位置融合
4:视觉偏航融合
5:多转子拖动融合
6:旋转外视
7: GPS偏航融合
8:视觉速度融合;
2、EKF2_HGT_MODE高度估计来源选择
确定EKF使用的高度数据的主要来源备注:距离传感器选项只能在平面上操作时使用，因为局部NED原点将随着地面水平上下移动。
值:
0:气压
1:全球定位系统(GPS)
2:距离传感器
3:视觉
需要重新启动:true
3、Mag_sides:传感器校准面数选择
4、USB_CHK：当用数据线调试飞机时，有时会显示“usb is not safe”，此时搜索“usb_chk”把数值调到197848最大值即可。
5、CBRK_IO_Safety：安全开关
当提示因为安全开关的问题无法解锁飞机时，把CBRK_IO_SAFETY数值调到最大值22027，相当于禁用安全开关。

二十七、PX4参数含义查询
可以到PX4官方的参数对照表中查询对应参数的定义：https://dev.px4.io/v1.11_noredirect/zh/advanced/parameter_reference.html?q=
二十八、航模锂电池的使用与保养
1.切勿过放：一般认为单片电芯的电压低于3.5V，就有可能对电池造成损伤，也就是常说的电池过放了，过放的电池会鼓包，这样的电池拿来继续充电是很危险的，可能会引起火灾，建议在电压降到 3.6V 的时候，就不要继续飞行了。因为地面空载测到3.6V，空中满油门飞行的时候，电压就远低于 3.6V，甚至低于 3V，很容易就过放了。
2.切勿过充：放电电压有下限，充电电压也有上限。上限是 4.2V，一节 3S电池，标称总电压11.1V，充满以后就是 12.6V，如果电压超过了4.2V，那就是过充，同样会损坏电池。现在的智能充电器会在 4.2V 时自动停充，但要小心有些航模充电器精度差，会过充，还有些充电器可以调节到高于4.2V 的电压，这是针对高压版电池的，普通电池不能用这个功能。充电的时候，模式要选平衡充电。电池长期保存时，电压是有要求的，单片电芯的电压保持在 3.85V 比较好。
3.电池存放：不要满电保存，满电保存对航模电池的放电能力会有 很大的影响，建议每次使用完电池后，都充放电到储存电压，特别是充满后没来得及使用的电池，一定要放电，长期满电存放，会损 坏电池，由于锂电池稳定性先天不足，正常存放也有一定起火概率。很多节锂电池堆放在一起不亚于一颗燃烧弹，平时存放时，电池应该避开易燃物单独保存，有条件的话，用防爆阻燃的容器存放。
二十九、P450连接飞控
参考：https://docs.amovlab.com/prometheuswiki/#/src/P450%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/%E9%A6%96%E6%AC%A1%E9%A3%9E%E8%A1%8C
三十、P450nomachine远程连接/P450远程桌面连接
参考：https://docs.amovlab.com/prometheuswiki/#/src/P450%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/%E9%A6%96%E6%AC%A1%E9%A3%9E%E8%A1%8C
三十一、P600通讯连接（homer版）
参考：prometheuswiki文档 - 首次飞行Homer版 (amovlab.com)
三十二、P600通讯连接（H16版）
参考：prometheuswiki文档 - 首次飞行H16版 (amovlab.com)
三十三、PX4如何下载飞行日志

通过有线或者无线连接连接上QGC与飞控（有线下载速度相对较快），在QGC上进入Log Download界面点击刷新最后一条就是最近飞行的日志，选择后即可进行下载。

三十四、PX4日志如何分析
可以使用 px4在线分析网站https://logs.px4.io来分析日志不需用特殊工具,多刷新几次就会出来；
选择文件后点击upload就可以上传到网站分析也可以复制链接分享给分析人员。更多日志分析工具参考：https://docs.px4.io/main/zh/log/flight_log_analysis.html

三十五、QGroundControl地面站的使用教程
参考官方教程：https://docs.qgroundcontrol.com/master/en/index.html

三十六、PX4地面站如进行航点飞行
参考官方航线飞行教程：https://docs.qgroundcontrol.com/master/en/PlanView/PlanView.html

三十七、QGroundControl地面站在Windows下的UI 渲染/视频驱动程序问题
如果您在 Windows 上遇到 UI 渲染问题或视频驱动程序崩溃，这可能是由“不稳定”的 OpenGL 驱动程序引起的。QGroundControl提供了 3 个快捷方式，您可以使用它们在“更安全”的视频模式下启动QGroundControl（按顺序尝试）：
QGroundControl： QGC 直接使用 OpenGL 图形驱动程序。
GPU 兼容模式： QGC 使用 ANGLE 驱动程序，它在 DirectX 之上实现 OpenGL。
GPU 安全模式： QGC 为 UI 使用软件光栅器（这非常慢）。
三十八、QGroundControl在Ubuntu上视频流式传输失败（缺少 Gstreamer）
在 Ubuntu 上，您必须安装Gstreamer组件才能观看视频流。如果未安装这些，QGroundControl将无法创建 gstreamer 节点并失败：
VideoReceiver::start() failed. Error with gst_element_factory_make(‘avdec_h264’)
Ubuntu 的下载/安装说明包括GStreamer设置信息：
https://docs.qgroundcontrol.com/master/en/getting_started/download_and_install.html#ubuntu
Ubuntu 18.04 中的 GSteamer 版本有一个错误，当在同时具有 Intel 和 NVidia 视频显示适配器的系统上使用基于 VA API 的解码器（即 vaapih264dec 等）时，该错误会阻止视频显示。
更一般地说，虽然已知该问题发生在带有 Intel 和 NVidia VGA 的 Ubuntu 18.04 上，但它可能发生在任何 linux 系统和其他类型的（双）VGA 上。
在这种情况下让QGroundControl工作的最简单方法是使用以下命令行启动它：
LIBVA_DRIVER_NAME=fakedriver ./QGroundControl)  will this make the
其他替代方法是禁用其中一个 VGA、卸载 VA API 组件或升级到 GStreamer 1.16

三十九、QGC连接问题：飞行器/车辆未显示在UI中
一旦创建了通信链接（使用 USB 或 WiFi 等），QGC 将自动连接到车辆。如果您建立了该链接并且您没有在 QGC UI 中看到您的车辆，您可以使用控制台日志记录到帮助调试问题。

使用以下步骤调试问题：

从未连接的硬件车辆链接开始。例如，不要插入 USB 连接和/或在您的操作系统中建立 WiFi 链接。
在 QGC 中打开LinkManagerLog 控制台日志记录。这将记录有关 QGC 看到并连接到的链接的输出。
建立硬件车辆通信链路。
控制台日志输出应显示如下内容：

[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:563 - "Waiting for bootloader to finish "/dev/cu.usbmodem01""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:563 - "Waiting for bootloader to finish "/dev/cu.usbmodem01""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:563 - "Waiting for bootloader to finish "/dev/cu.usbmodem01""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:563 - "Waiting for bootloader to finish "/dev/cu.usbmodem01""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:572 - "Waiting for next autoconnect pass "/dev/cu.usbmodem4201""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:613 - "New auto-connect port added:  "ArduPilot ChibiOS on cu.usbmodem4201 (AutoConnect)" "/dev/cu.usbmodem4201""
前几行表示 QGC 已经建立了硬件链接，最后是自动连接。
如果您没有看到任何这些，则 QGC 无法识别硬件链接。要查看您的硬件是否在操作系统级别被识别，请执行以下操作：

从未连接的硬件车辆链接开始。例如，不要插入 USB 连接和/或在您的操作系统中建立 WiFi 链接。
在 QGC 中打开LinkManagerVerboseLog 控制台日志记录。这将记录 QGC 识别的所有串行硬件连接的输出。
您将看到设备上串行端口的连续输出。
插入您的 USB 通信设备。
您应该会在控制台输出中看到一个新设备。例子：
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:520 - "-----------------------------------------------------"
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:521 - "portName:           "cu.usbmodem4201""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:522 - "systemLocation:     "/dev/cu.usbmodem4201""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:523 - "description:        "Pixhawk1""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:524 - "manufacturer:       "ArduPilot""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:525 - "serialNumber:       "1B0034000847323433353231""
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:526 - "vendorIdentifier:   1155"
[D] at /Users/travis/build/mavlink/qgroundcontrol/src/comm/LinkManager.cc:527 - "productIdentifier:  22336"
之后它应该继续记录到该设备的连接，如第一个示例所示。
如果在插入时控制台输出中没有看到新的串行端口，则可能是操作系统级别的硬件出现问题。

四十、QGC连接问题：飞行器/车辆没有响应
这表明尽管 QGC 能够连接到您行器/车辆的硬件链路，但链路上没有来回遥测。不幸的是，这可能表明存在许多问题：
硬件通信设置问题
固件问题
最后，如果 QGC 尝试自动连接到连接到计算机的非车辆设备，则可能会发生这种情况。您可以使用上述步骤识别这种情况，并注意 QGC 尝试连接的设备信息。为了使自动连接正常工作，它在尝试自动连接的设备上使用的过滤器有些宽泛并且可能不正确。如果您发现这种情况发生，您将需要从常规设置中关闭自动连接，并为您的车辆创建一个到通信链接的手动连接。您也可以从计算机中删除导致问题的设备，但这并不总是可行的。

四十一、QGC参数下载失败
参数下载失败的主要原因是通信链路噪声大、丢失率高。尽管参数协议有针对这种情况的重试逻辑，但它最终会放弃。此时您将收到一条错误消息，指出 QGC 无法检索完整的集合或参数。
虽然您仍然可以在此状态下驾驶飞行器/车辆，但不建议这样做。飞行器/车辆设置页面也将不可用。
您可以从“设置视图”>“MAVLink”页面查看链接的丢失率。即使是高个位数的丢失率也可能导致计划协议间歇性失败。更高的丢失率可能导致 100% 的失败。
固件或 QGC 错误的可能性也更小。要查看协议的来回消息流量的详细信息，您可以为参数协议打开控制台日志记录。
四十二、QGC任务上传/下载失败
尽管用于向车辆上传和下载计划（任务、地理围栏、集结点）的协议包含重试逻辑，但它仍然可以故障转移以高丢失率运行的通信链路。
计划上传和下载可能会在嘈杂的通信链路上失败（影响任务、GeoFence 和集结点）。如果发生故障，您应该会在 QGC UI 中看到类似于以下内容的状态消息：
任务转移失败。重试传输。错误：任务写入任务计数失败，超过最大重试次数。
可以在“设置视图”>“MAVLink”中查看链接的丢失率。损失率应为低个位数（即最大 2 或 3）：
高个位数的丢失率会导致间歇性故障。
较高的丢失率通常会导致 100% 的失败。
问题是由飞行堆栈或 QGC 中的错误引起的可能性要小得多。要分析这种可能性，您可以为计划上传/下载打开控制台日志记录并查看协议消息流量。

四十三、PX4开发指南

参考官方文档：http://docs.px4.io/main/en/development/development.html

四十四、MAVLink 开发者指南
参考官方文档：https://mavlink.io/en/

四十五、p600运行吊舱跟踪代码时无图像，可能有什么原因？
老版本p600可以重新拔插吊舱电源接头重新上电试试，新版p600可以按一下机身上面左边的银色圆形按钮开关一下吊舱。

四十六、NX系统可以备份吗？
sd卡可以备份，代码自行保存。如果环境崩溃，可以邮寄回我们，恢复出厂设置。教程参考：allspark-NX文档 - 镜像备份 (amovlab.com)

四十七、NX硬盘版如何备份系统？
将固态条取下，使用读卡器，用Gparted把分区复制粘贴到另一个固态里。

四十八、H16拍照后照片存哪里？
需要再天空端装入SD卡，储存在SD卡中。

四十九、机载电脑报USB overfiow 无法打开d435i相机。
需要使用USB3.0接口

五十、请问一下这个 SET_POSITION_TARGET_LOCAL_NED coordinate frame 0 unsupported 报错是什么原因？
因为换了飞控 固件，建议使用出厂固件，不建议换固件。

五十一、咱们这个视觉定位是不是t265自带的算法，没有用vins呀？
P450没有使用vins，使用的是双目自带。

五十二、MiniHomer信号很差，达不到官网文档所说的距离
可能是天线的问题，J检查天线接口针脚是否损坏。

五十三、运行定点脚本终端显示unconnected，可能有什么原因？
需要检查飞控和机载电脑的连接线是否完好；连接飞控，打开参数页面，查找ser-tel2-baut参数，改为921600；打开运行的launch文件，查看打开的ttyTHS口是否正确（硬件0=软件1），波特率是否正确。

五十四、有关于无人机按照脚本实现多点巡检的相关教程吗？
https://github.com/amov-lab/Prometheus/blob/v1.1/Modules/mission/waypoint_tracking/waypoint_tracking.cpp

五十五、可以通过机载电脑拉usb摄像头的流吗？
可以，可以参考 克隆/下载 
gimbal-control/
 src /
 gimbal_control /
 launch /
 rtsp_stream.launch 就在
  gimbal-control/ src / gimbal_control /launch / rtsp_stream.launch 下面，你可能需要自己手动配置一下这个推流参数

五十六、PX4飞控源码获取
https://github.com/PX4/PX4-Autopilot

五十七、p450连上了数传，但是输入正确的ip连不上飞控，但是连得上nomachine，是怎么回事？
用有线连接上飞控查找mav_0_config这个参数，将其改为face off。

五十八、p450遥控器校准时需要跟着右边的动画将右摇杆一直拉到底吗？
这个左摇杆跟着动画走完四个动作可以拉到最下面也可以自然回中，那个时候左摇杆已经校完了，这个动画是考虑到了左摇杆没有回中的遥控器。
五十九、PX4飞行前传感器/估算器检查/QGC报错/解锁报错
PX4 执行很多飞行前传感器质量和估算器检查，以确定是否有足够好的位置估计来解锁和驾驶飞行器（这些检查由 COM*ARM* 参数控制）。

任何飞行前错误都会在QGroundControl中报告为PREFLIGHT FAIL消息。 

在日志中的estimator_status.gps_check_fail_flags消息还显示了 GPS 质量检查失败。

EKF 飞行前检查 / 错误
什么是ECL EKF？

估计和控制库（ECL）使用扩展卡尔曼滤波器（EKF）算法来处理传感器测量并提供以下状态的估计值：

四元数定义了从北，东，下局部土框架到X，Y，Z体框架的旋转
IMU的速度-北，东，下（m / s）
在IMU上的位置-北，东，下（m）
IMU增量角度偏差估算-X，Y，Z（弧度）
IMU增量速度偏差估算-X，Y，Z（m / s）
地磁场分量-北，东，下（高斯）
车身框架磁场偏置-X，Y，Z（高斯）
风速-北，东（m / s）
EKF在延迟的“融合时间范围”上运行，以允许每次测量相对于IMU的不同时间延迟。每个传感器的数据都被FIFO缓冲并由EKF从缓冲区中检索出来，以便在正确的时间使用。每个传感器的延迟补偿由EKF2 _ * _ DELAY参数控制。

补充滤波器用于使用缓冲的IMU数据将状态从“融合时间范围”传播到当前时间。该滤波器的时间常数由EKF2_TAU_VEL和EKF2_TAU_POS参数控制。

EFK报道的下面的这些错误（相关的检查和参数）同时会传入到QGC中：

PREFLIGHT FAIL: EKF HGT ERROR：

当 IMU 和高度测量数据不一致时会产生此错误。
执行加速度计和陀螺仪校准并重新启动飞行器。 如果错误仍然存在，请检查高度传感器数据是否存在问题。
检查由COM_ARM_EKF_HGT参数控制。
PREFLIGHT FAIL: EKF VEL ERROR:

当 IMU 和 GPS 速度测量数据不一致时会产生此错误。
检查 GPS 速度数据是否存在不真实的数据跳转。 如果 GPS 质量看起来没有问题，请执行加速度计和陀螺仪校准并重新启动飞行器。
检查由COM_ARM_EKF_VEL参数控制。
PREFLIGHT FAIL: EKF HORIZ POS ERROR:

当 IMU 和位置测量数据（GPS 或外部视觉）不一致时会产生此问题。
检查位置传感器数据是否存在不真实的数据跳转。 如果数据质量看起来不错，请执行加速度计和陀螺仪校准并重新启动飞行器。
检查由COM_ARM_EKF_POS参数控制。
PREFLIGHT FAIL: EKF YAW ERROR:

当使用陀螺仪数据估计的偏航角和来自磁力计或外部视觉系统的偏航角不一致时，产生该误差。
检查 IMU 数据是否存在较大的偏航率漂洗，并检查磁力计的对准和校准。
检查由 COM_ARM_EKF_YAW 参数控制
默认值0.5允许导航偏航角和磁偏航角（磁力计或外部视觉）之间的差异不超过EKF所允许的最大值的50％，并且为飞行开始时的误差增加提供了一定的余量。
如果偏航陀螺仪具有较大的偏移量，或者如果车辆在磁干扰或磁力计校准不良的情况下移动或旋转，则可能会失败。
PREFLIGHT FAIL: EKF HIGH IMU ACCEL BIAS:

当 EKF 估计的 IMU 加速度计偏差过大时，会产生此错误。
检查由COM_ARM_EKF_AB参数控制。
PREFLIGHT FAIL: EKF HIGH IMU GYRO BIAS:

当由 EKF 估计的 IMU 陀螺仪偏差过大时会产生该错误。
检查由COM_ARM_EKF_GB参数控制。
PREFLIGHT FAIL: ACCEL SENSORS INCONSISTENT - CHECK CALIBRATION:

当来自不同 IMU 单元的加速度测量值不一致时，会产生此错误消息。
此检查仅适用于具有多个 IMU 的板。
检查由COM_ARM_IMU_ACC参数控制。
PREFLIGHT FAIL: GYRO SENSORS INCONSISTENT - CHECK CALIBRATION:

当来自不同 IMU 单元的角速率测量值不一致时，会产生此错误消息。
此检查仅适用于具有多个 IMU 的板。
检查由COM_ARM_IMU_GYR参数控制。
PREFLIGHT FAIL: COMPASS SENSORS INCONSISTENT - CHECK CALIBRATION:

当来自不同指南针传感器的测量值差异太大时，会产生此错误消息。
这表明校准，定向或电磁干扰不良。
该检查仅适用于连接了多个指南针/磁力计的情况。
检查由 COM_ARM_MAG_ANG 参数控制
PREFLIGHT FAIL: EKF INTERNAL CHECKS:

如果水平GPS速度、磁偏航、垂直GPS速度或垂直位置传感器(默认为Baro，但如果使用非标准参数，可能是测距仪或GPS)的创新幅度过大，则会产生此错误信息。创新之处在于由惯性导航计算预测的数值与由传感器测量的数值之间的差异。
用户应检查日志文件中的创新级别以确定原因。 这些可以在ekf2_innovations消息下找到。 常见问题/解决方案包括：
IMU在预热时漂移。 可以通过重新启动自动驾驶仪来解决。 可能需要IMU加速和陀螺仪校准。
邻近的磁干扰与车辆运动相结合。解决我的移动车辆，等待或重新供电。
磁力计校准不正确并伴有车辆运动。 通过重新校准解决。
启动时的初始冲击或快速移动导致了不良惯性导航解决方案。解决方法是重新启动车辆，在前5秒尽量减少移动。
其他参数
以下参数也会影响飞行前检查

COM_ARM_WO_GPS

COM_ARM_WO_GPS参数控制在没有全局位置估计的情况下是否允许解锁

 
六十、qgc如何查看当前飞行器的经纬度
飞行器在室外时打开qgc的飞行页面姿态球的下方可以增加经纬度的选项，勾上就可以查看了。

六十一、p450校准地平线时经常失败
推荐有限进行校准，无限校准很大概率会失败。

六十二、机载电脑开机时会出现报错是什么情况

cd etc/profile 将最后一句fb…删掉，这个是当时为了适配各种分辨率加的，删掉就不会有分辨率报错




